<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>epitech-ics</title>
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
</head>
<body>
<header>
    <h1>Epitech Calendar</h1>
    <p>Your Epitech planning in calendar format</p>
</header>
<h2>Introduction</h2>
<p>Get your Epitech planning using your native calendar application, instead of checking the intra.</p>
<p>This will get the events you are registered to for the next week. And since calendar applications get updates from
    subscriptions frequently, you will always be up to date!</p>
<h2>Get started</h2>
<p>Enter your autologin link and click on the button to get a link: this will be your subscription link. Look in the
    next section to learn how to subscribe to a calendar.</p>
<p>Your autologin link is not saved, it does not even appear in the server logs, read the <a
        href="https://github.com/x4m3/epitech-ics">source code</a> if you want to check by yourself, or feel free to
    host your own instance.</p>
<p>Get your autologin link on <a href="https://intra.epitech.eu/admin/autolog">the intra</a>.</p>
<noscript><code>JavaScript is required to generate your calendar link</code></noscript>
<div>
    <input id="autologinInput" type="url" name="autologin">
    <button onclick="generateCalendarLink()">Generate your calendar link</button>
    <p id="calendarLinkOutput"></p>
</div>

<h2>How to subscribe to a calendar</h2>
<ul>
    <li><a href="https://support.apple.com/guide/calendar/subscribe-to-calendars-icl1022/mac">macOS</a></li>
    <li><a href="https://support.apple.com/guide/iphone/use-multiple-calendars-iph3d1110d4/ios">iOS</a> Look in section
        <b>Subscribe to a calendar</b></li>
    <li><a href="https://support.google.com/calendar/answer/37100">Google Calendar</a> Only available on desktop
        computers
    </li>
    <li>
        <a href="https://support.microsoft.com/en-us/office/import-or-subscribe-to-a-calendar-in-outlook-on-the-web-503ffaf6-7b86-44fe-8dd6-8099d95f38df">Office
            365</a> Look in section <b>Subscribe to a calendar</b></li>
    <li>
        <a href="https://support.microsoft.com/en-us/office/import-or-subscribe-to-a-calendar-in-outlook-com-cff1429c-5af6-41ec-a5b4-74f2c278e98c">Outlook.com</a>
        Look in section <b>Subscribe to a calendar</b></li>
</ul>

<footer>
    Made with ❤️ by <a href="http://philippeloctaux.com">phil</a> &mdash;
    <a href="https://github.com/x4m3/epitech-ics">source code</a>
</footer>

<script>
    function generateCalendarLink() {
        let autologin = document.getElementById("autologinInput").value;
        let regex = new RegExp("^(https://intra.epitech.eu/auth-)([a-z0-9]{40})$");
        let output = regex.exec(autologin);
        if (output === null) {
            document.getElementById("calendarLinkOutput").innerHTML = "Invalid autologin link. Verify and try again.";
            return;
        }
        // output[2] is the second regex group
        let link = "/" + output[2] + "/weekly.ics";
        document.getElementById("calendarLinkOutput").innerHTML = "Copy your <a href=" + link + ">calendar link</a>!";
    }
</script>

</body>
</html>